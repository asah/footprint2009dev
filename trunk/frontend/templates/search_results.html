{% extends 'layout_two_column.html' %}

{% block js_files %}
  <script type='text/javascript' src='/js/map.js'></script>
  <script type='text/javascript' src='/js/search_results.js'></script>
  <script type='text/javascript' src='/js/calendar_widget.js'></script>
  <script type='text/javascript' src='http://w.sharethis.com/button/sharethis.js#tabs=email%2Cweb%2Cpost&amp;charset=utf-8&amp;style=default&amp;publisher=53d633da-5f45-4163-9dfa-6874\4e89a302'></script>
{% endblock %}

{% block subheader %}
{% endblock subheader %}

{% block content_left %}
  <div class='top_search'>
    What's going on this month?
  </div>
  <div id='calendar'>
    {% include 'calendar_widget.html' %}
  </div>
  <div id='map'></div>
  <div>
    In or near: <input style='margin-left: 10px;' id='location'
                       onchange='submitForm("map"); return false;'
                       type='text' size='18' value='{{ location }}'/>
  </div>
{% endblock content_left %}

{% block content_right %}
  <div class='top_search'>
    Show me all activities:
    <nobr class='nobreak'>
      <input type='text' id='keywords'
             onchange='submitForm("keywords"); return false;'
             size='40' value='{{ keywords }}' />
      <input type=submit id='refine' value='Refine'
             onclick='submitForm("keywords"); return false;' />
    </nobr>
  </div>
  <div id='snippets_pane'>
    {% include 'snippets_list.html' %}
  </div>
{% endblock content_right %}

{% block prefooter %}
<center>
  {%include 'paginator.html' %}
</center>

<div style='margin-top:100px; color: #999; font-size: small;'>
 Query url= <a href='{{ result_set.query_url_encoded }}'>{{ result_set.query_url_unencoded }}</a><br>
 Keywords='{{ keywords }}'<br>
 Location='{{ location }}'<br>
</div>

<script>
document.userDisplayName = '{{user_display_name}}';
</script>
<script type='text/javascript' src='/js/snippets_list.js'></script>

<script type='text/javascript'>
  google.load('maps', '2',
              { 'callback' : function() {
                                 // Maps API is now loaded.  First initialize
                                 // the map object, then execute any
                                 // map-dependent functions that are queued up.
                                 mapApiLoadComplete();
                                 asyncLoadManager.doneLoading('map');
                             }});

</script>
{% endblock prefooter %}
