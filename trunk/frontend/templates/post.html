{% extends "layout_full.html" %}

{% block title %}
Post a listing
{% endblock %}}

{% block content %}

<style>
table {
  padding: 0;
  border-spacing: 0;
}
.caption {
  font-size: 12px;
  font-style: italic;
}
.expand {
  font-size: 10px;
}
.debug {
  position: absolute;
  top: 100px;
  right: 20px;
  width: 400px;
  height: 400px;
  border: 1px solid black;
  background-color: #ddf;
  overflow: auto;
  font-size: 10px;
  font-family: courier;
  display:none;
}
</style>


(instructions go here...)

<form target="_blank" onsubmit="return window.confirm(&quot;You are submitting information to an external page.\nAre you sure?&quot;);"> 

<div id='dbg' class='debug'></div>
 
<table>
<tr><td>Enter a title:</td><td><input type="text" name="title" size="40"></td></tr>
<tr><td></td><td class='caption'>e.g. Ohlone Park clean up and volleyball</</td></tr>
</table>
<br/>
Describe the activity:
<a id='description_link' class='expand' href='#' onclick='expandTextbox("description", 3, 30)'>give me more room to write...</a>
<br/>
<textarea name="description" rows="3" cols="80"></textarea><p/>

(optional) Describe any special skills or equipment that is needed:
<a id='skills_link' class='expand' href='#' onclick='expandTextbox("skills", 2, 8)'>give me more room to write...</a>
<br/>
<textarea name="skills" rows="3" cols="80"></textarea><p/> 
<p/> 
Is the opportunity happening at an address or can volunteers help remotely from their homes?<br/> 
<table>
<tr><td><input type="radio" name="virtual" value="Yes">Help from home</td></tr>
<tr><td><input type="radio" name="virtual" value="No">Specific Location:</td><td align='right'>location name:</td><td><input type="text" name="addrname1" size="40"><span class='caption'>e.g. Ohlone Park</span></td></tr>
<tr><td></td><td align='right'>street address:</td><td><textarea onchange='location_ok="unchecked";' onblur='checkLocation()' style='margin:0' rows='3' cols='45' name="addr1"></textarea></td></tr>
</table>

Is the opportunity sponsored by an organization?<br/> 
<input type="radio" name="sponsored" value="No"> No<br/> 
<input type="radio" name="sponsored" value="Yes"> Yes. What&#39;s the organization&#39;s name? <input type="text" name="sponsoringOrganizationsName" size="40"><p/> 
 
When does the opportunity start?<br/> 
<input type="radio" name="openEnded" value="Yes"> Now/anytime<br/> 
<input type="radio" name="openEnded" value="No"> On <input type="text" name="startMonth" size="2" maxlength="2" value="MM"> / <input type="text" name="startDay" size="2" maxlength="2" value="DD"> / <input type="text" name="startYear" size="4" maxlength="4" value="YYYY">, from <input type="text" name="startTime" size="20" value="[HH:MM] [am/pm]"> to <input type="text" name="endTime" size="20" value="[HH:MM] [am/pm]"><p/> 
 
How can people learn more about this opportunity and reserve a place? (check all that apply)<br/> 
<input type="checkbox" name="contact" value="none"> No need to contact -- just show up<br/> 
<input type="checkbox" name="contact" value="email"> Email this address <input type="text" name="contactEmail"><br/> 
<input type="checkbox" name="contact" value="phone"> Call <input type="text" name="contactPhone" value="xxx-xxx-xxxx" size="15"> and ask for <input type="text" name="conactName"><br/> 
<input type="checkbox" name="contact" value="url"> Visit this web site <input type="text" name="contactURL" size="30"><br/> 
<p/> 

show <a href='javascript:toggleElement("advd");'>advanced options</a> including age and gender restrictions, end time, recurring events, and more.<p/>

<div id='advd' style='display:none'> 
How often does it happen?<br/> 
<table>
<tr><td><input type="radio" name="recurrence" value="No"></td><td> Once</td></tr>
<tr><td><input type="radio" name="recurrence" value="Daily"></td><td> Daily</td></tr>
<tr><td><input type="radio" name="recurrence" value="Weekly"></td><td> Weekly, on
  Sun: <input type="checkbox" name="weekly" value="Sunday"> 
  Mon: <input type="checkbox" name="weekly" value="Monday"> 
  Tues: <input type="checkbox" name="weekly" value="Tuesday"> 
  Wed: <input type="checkbox" name="weekly" value="Wednesday"> 
  Thur: <input type="checkbox" name="weekly" value="Thursday"> 
  Fri: <input type="checkbox" name="weekly" value="Friday"> 
  Sat: <input type="checkbox" name="weekly" value="Saturday"> 
</td></tr>
<tr><td><input type="radio" name="recurrence" value="BiWeekly"></td><td> Every other week, on
  Sun: <input type="checkbox" name="biweekly" value="Sunday"> 
  Mon: <input type="checkbox" name="biweekly" value="Monday"> 
  Tues: <input type="checkbox" name="biweekly" value="Tuesday"> 
  Wed: <input type="checkbox" name="biweekly" value="Wednesday"> 
  Thur: <input type="checkbox" name="biweekly" value="Thursday"> 
  Fri: <input type="checkbox" name="biweekly" value="Friday"> 
  Sat: <input type="checkbox" name="biweekly" value="Saturday">
</td></tr>
<tr><td><input type="radio" name="recurrence" value="Monthly"></td><td> Monthly</td></tr>
</table>
<p/> 
The opportunity ends on: <input type="text" name="endMonth" size="2" maxlength="2" value="MM"> / <input type="text" name="endDay" size="2" maxlength="2" value="DD"> / <input type="text" name="endYear" size="4" maxlength="4" value="YYYY"><br/>
Are attendees paid? <select name="paid"><option value="Yes">Yes</option><option value="No" selected>No</option></select><br/>
How many hours per week should a volunteer be ready to commit to? <input type="text" name="commitmentHoursPerWeek"><br/>
Who is allowed to participate? (check all that apply)<br/> 
<input type="checkbox" name="audience" value="all"> Anyone, including kids under 13<br/> 
<input type="checkbox" name="audience" value="minAge"> Anyone at least <input type="text" name="minimumAge" size="3"> years of age<br/> 
<input type="checkbox" name="audience" value="teens"> Teenagers only please<br/> 
<input type="checkbox" name="audience" value="seniors"> Seniors only please<br/> 
<input type="checkbox" name="audience" value="sexRestricted"> <select name="sexRestrictedTo"><option value="Neither" selected>[Women/Men]</option><option value="Female">Women</option><option value="Male">Men</option></select> only please.<p/> 
</div>

<span id='submit' onclick='submit()' style='padding:4px 10px 4px 10px;background-color:#ddf;border:1px solid #333;font-size:24px;'>submit</span>

</form>

<script>
var qry = location.search.substring(1);
var args = qry.split('&');
for (var i = 0, n = args.length; i < n; i++) {
  var ar = args[i].split('=');
  if (ar[0]=='dbg' && ar[1]!='0') {
    var dbg = document.getElementById("dbg");
    if (dbg) {
      dbg.style.display = 'inline';
    }
  }
}

function d(msg) {
  var dbg = document.getElementById("dbg")
  if (dbg) {
    dbg.innerHTML += msg + "<br/>";
  }
}

function toggleElement(id) {
  d("toggleElement("+id+")");
  var el = document.getElementById(id);
  if (el.style.display == 'none') {
    el.style.display = 'inline';
  } else {
    el.style.display = 'none';
  }
  return false;
}

function expandTextbox(name, incr, max) {
  d("expandTextbox("+name+")");
  var el = document.getElementsByName(name)[0];
  if (el.rows < max) {
    el.rows += incr;
  } else {
    var link = document.getElementById(name+"_link");
    link.innerHTML = "sorry, that's the longest we allow";
  }
  return false;
}

function checkLocation() {
   // TODO: implement... (be sure not to get maps api errors testing on diff domains...)
   
}

function submit() {
  d("submit");
  var submit = document.getElementById('submit');
  submit.style.backgroundColor = '#eef';
  submit.style.color = 'gray';
  submit.style.borderColor = '#666';

  submit.innerHTML = 'checking location...';
  if (location_ok == "unchecked") {  
    // in case the browser didn't fire onblur event in the form
    checkLocation();
  }
  if (location_ok != "ok") {
    // TODO: error
  }

  submit.innerHTML = 'checking location...';
  if (location_ok == "unchecked") {  
    // in case the browser didn't fire onblur event in the form
    checkLocation();
  }
  if (location_ok != "ok") {
    // TODO: error
  }
}
</script>

{% endblock %}
