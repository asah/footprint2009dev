{% for result in result_set.results %}
  <div class='snippet'>
    <table>
    <tr>
    <td valign='top'>
    <div class='snippet_buttons'>
      <!--<script type="text/javascript">
        SHARETHIS.addEntry({
            url: "{{result.url|escape}}",
            title: "{{result.js_escaped_title|escape}}",
            summary: "{{result.js_escaped_snippet|escape}}"
        }, {offsetLeft: -250});
      </script>-->
      <!-- TODO: We need locations and dates for adding to calendars -->
      <div class='snippet_button'
           onclick='addToCalendar(this, "YAHOO", "{{result.url|escape}}",
                                  "{{result.js_escaped_title|escape}}",
                                  "{{result.js_escaped_snippet|escape}}",
                                  "20090214", "locationPlaceholder")'>
        <img src='images/yahoo.gif' height="16px" alt='Yahoo! Calendar'/>
      </div>
      <div class='snippet_button'
           onclick='addToCalendar(this, "GOOGLE", "{{result.url|escape}}",
                                  "{{result.js_escaped_title|escape}}",
                                  "{{result.js_escaped_snippet|escape}}",
                                  "20090214", "locationPlaceholder")'>
        <img src='images/google.png' height="16px" alt='Google Calendar'/>
      </div>
      <div class='snippet_button'
           onclick='expressInterest(this, "{{result.id|escape}}",
                                          "{{result.base_url|escape}}",
                                          "{{result.interest|escape}}")'>
        {% if result.interest %}
          <img src='images/star-on.png' alt=''/>
        {% else %}
          <img src='images/star-off.png' alt=''/>
        {% endif %}
      </div>
    </div>
    </td>
    <td valign='top'>
    <div>
      {# TODO(paul): ESCAPE THE LOCATION FIELD AGAINST QUOTES #}
      {% if location %}
        <script>workQueue.addCallback(function(){
            map.addMarkerGeocode("{{ result.location }}")});</script>
      {% endif %}

      <div class='snippet_title'>
        <a href='{{ result.url }}'>{{ result.title }}</a>
      </div>
      {% if location %}
        <div class='snippet_location'>
          {{ result.location }}
        </div>
      {% endif %}
      <div class='snippet_text'>
        {{ result.snippet }}
      </div>
      <div class='snippet_url'>
        <a href='{{ result.url }}'>{{ result.url_short }}</a>
      </div>

      <div class='snippet_star_count'>
      {% if result.interest_count %}
        {% ifequal result.interest_count 1 %}
          Starred by one other person.
        {% else %}
          Starred by {{result.interest_count}} other people.
        {% endifequal %}
      {% endif %}
      </div>
    </div>
    </td>
    </tr>
    </table>
  </div>
{% endfor %}
<script type='text/javascript'>
  if (map) {
    workQueue.execute();
  }
</script>